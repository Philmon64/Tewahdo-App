<!DOCTYPE html>
<html lang="ti">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>·àò·åΩ·àì·çç ·âÖ·ã±·àµ ·àì·å∫·à≠ ·â∞·çà·â∞·äí | ·â•·ãõ·ãï·â£ ·ã∞·à®·åÉ·â≥·âµ</title>
<style>
  :root{
    --purple-1:#2b0a4a; --purple-2:#3a0e63; --purple-3:#5c1aa1;
    --gold-1:#ffd166; --gold-2:#ffb703; --accent:#00e3a2; --danger:#ff4d6d;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:"Noto Sans Ethiopic", ui-rounded, "Segoe UI", system-ui, sans-serif;
    color:#fff;
    background:
      radial-gradient(1200px 600px at 70% -10%, rgba(255,255,255,.08), transparent 60%),
      radial-gradient(900px 500px at -10% 0%, rgba(255,255,255,.06), transparent 50%),
      linear-gradient(180deg, #150427 0%, #20073b 35%, #2a0a4a 60%, #1a0631 100%);
    overflow-x:hidden;
  }
  .stars{position:fixed; inset:0; pointer-events:none}
  .stars i{position:absolute; width:3px; height:3px; background:#fff; border-radius:50%;
    opacity:.7; filter:drop-shadow(0 0 6px #fff); animation: twinkle 2.4s infinite ease-in-out}
  @keyframes twinkle{0%,100%{transform:scale(1); opacity:.5} 50%{transform:scale(1.8); opacity:1}}

  .wrap{max-width:960px; margin:40px auto; padding:20px}
  .card{
    background: radial-gradient(100% 120% at 50% 0, rgba(255,255,255,.08), rgba(255,255,255,.03) 60%),
               linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.12); border-radius:24px; padding:28px;
    box-shadow: 0 20px 60px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.05);
    backdrop-filter: blur(6px);
  }
  .title{display:flex; align-items:center; justify-content:center; gap:14px; font-weight:900; letter-spacing:.5px}
  .crown{width:72px; height:52px; background:linear-gradient(180deg,#ffe07a,#ffc300 80%);
    border-radius:8px 8px 14px 14px/8px 8px 30px 30px;
    clip-path: polygon(0 55%, 15% 20%, 30% 55%, 50% 18%, 70% 55%, 85% 20%, 100% 55%, 100% 100%, 0 100%);
    box-shadow:0 6px 0 #bf8b00,0 0 30px rgba(255,221,87,.7)}
  .ribbon{margin:18px auto 6px; width:max-content; padding:10px 18px;
    background:linear-gradient(180deg,#ff5f8a,#ff2e63); color:#fff; border-radius:999px; font-weight:800}
  .btn{appearance:none; border:none; cursor:pointer; color:#2b0a4a; padding:14px 22px; border-radius:999px;
    font-weight:900; font-size:18px; background:linear-gradient(180deg,#ffd86b,#ffb703);
    box-shadow:0 12px 30px rgba(255,183,3,.35), inset 0 -2px 0 rgba(0,0,0,.15)}
  .btn:hover{transform:translateY(-2px)} .btn:disabled{opacity:.5; pointer-events:none}
  .ghost{background:transparent; color:#fff; border:2px solid rgba(255,255,255,.25); box-shadow:none}
  .bar{height:10px; border-radius:999px; background:rgba(255,255,255,.15); overflow:hidden; margin:14px 0 6px}
  .bar>span{display:block; height:100%; background:linear-gradient(90deg,#5c1aa1,#9b4dff); width:0%; transition:width .4s}
  .hud{display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin:10px 0 20px}
  .pill{padding:8px 14px; border-radius:999px; font-weight:700; background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.12)}
  .pill.bad{background:rgba(255,77,109,.18); border-color:rgba(255,77,109,.35)}
  .pill.good{background:rgba(0,227,162,.18); border-color:rgba(0,227,162,.35)}
  .question{text-align:center; font-size:22px; line-height:1.4; margin:8px 0 18px}
  .options{display:grid; gap:12px}
  .option{border:2px solid rgba(255,255,255,.18); background:rgba(0,0,0,.25); padding:14px; border-radius:16px; text-align:center; font-weight:700; cursor:pointer}
  .option:hover{border-color:#9b4dff; background:rgba(155,77,255,.1)}
  .option.selected{border-color:#9b4dff; background:rgba(155,77,255,.18)}
  .option.correct{border-color:#00e3a2; background:rgba(0,227,162,.18)}
  .option.wrong{border-color:#ff4d6d; background:rgba(255,77,109,.18)}
  .blank{background:transparent; color:#fff; border:none; border-bottom:3px dotted #ffd166; padding:4px 6px; font-size:20px; text-align:center; outline:none; min-width:120px}
  .match-wrap{position:relative} .match{display:grid; grid-template-columns:1fr 1fr; gap:14px; align-items:start; margin-top:8px}
  .col{display:flex; flex-direction:column; gap:10px}
  .chip{background:rgba(0,0,0,.25); border:2px solid rgba(255,255,255,.18); border-radius:14px; padding:10px 12px; text-align:center; font-weight:800; cursor:pointer; user-select:none}
  .chip:hover{border-color:#9b4dff; background:rgba(155,77,255,.12)}
  .chip.selected{border-color:#ffd166; background:rgba(255,209,102,.2)}
  .chip.locked{border-color:#00e3a2; background:rgba(0,227,162,.18); cursor:default}
  .connector{position:absolute; inset:0; pointer-events:none}
  .connector line{stroke:#ffd166; stroke-width:3; stroke-linecap:round; stroke-dasharray:4 6; filter:drop-shadow(0 0 6px rgba(255,209,102,.75))}
  .modal{display:none; position:fixed; inset:0; background:rgba(0,0,0,.6); place-items:center; z-index:20}
  .modal .panel{width:min(640px, 92vw); text-align:center}
  .big-score{font-size:56px; font-weight:900; color:#ffd166; text-shadow:0 6px 0 #b38800}
  .footer{display:flex; gap:12px; justify-content:center; margin-top:16px; flex-wrap:wrap}
</style>
</head>
<body>
<div class="stars" id="stars"></div>

<div class="wrap">
  <div class="card" id="screen">
    <div class="title">
      <div class="crown"></div>
      <div style="font-size:28px">·àò·åΩ·àì·çç ·âÖ·ã±·àµ ·â∞·çà·â∞·äí</div>
    </div>
    <div class="ribbon" id="ribbon">·ã∞·à®·åÉ 1</div>

    <div class="hud">
      <div class="pill"><b>·ã∞·à®·åÉ:</b> <span id="levelNum">1</span>/4</div>
      <div class="pill"><b>·å•·ã´·âÑ</b> <span id="qIndex">1</span>/10</div>
      <div class="pill"><b>·äê·â£·à≠</b> <span id="score">0</span></div>
      <div class="pill" id="timerPill"><b>·åä·ãú</b> <span id="timer">00:33</span></div>
    </div>

    <div class="bar"><span id="progress"></span></div>

    <div class="question" id="questionText">·åÄ·àù·à≠ ·äï·àù·â•·à´·à≠·ç¢</div>

    <div id="content"></div>

    <div class="footer">
      <button id="btnPrev" class="btn ghost">‚¨Ö ·âÄ·ã≥·àö</button>
      <button id="btnNext" class="btn">·ãù·âï·åΩ·àç ‚ûú</button>
      <button id="btnStart" class="btn" style="display:none">·åÄ·àù·à≠</button>
    </div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="card panel">
    <div class="crown" style="margin:0 auto 10px"></div>
    <div class="ribbon" id="modalRibbon">·ã∞·à®·åÉ ·â∞·ãõ·à™·â°</div>
    <div class="big-score" id="modalScore">9 / 10</div>
    <div class="question" id="modalMsg">·àò·àç·ä•·äΩ·â≤</div>
    <div class="footer">
      <button id="btnRetry" class="btn ghost">·ã∞·à®·åÉ ·ãµ·åà·àù</button>
      <button id="btnNextLevel" class="btn">·ãù·âï·åΩ·àç ·ã∞·à®·åÉ ‚ñ∂</button>
    </div>
  </div>
</div>

<script>
/* ·à∞·àõ·ã´·ãä ·äÆ·ä®·â¶·âµ */
(function(){const w=document.getElementById('stars'); for(let i=0;i<80;i++){const s=document.createElement('i'); s.style.left=Math.random()*100+'%'; s.style.top=Math.random()*100+'%'; s.style.animationDuration=(1.5+Math.random()*2.5)+'s'; w.appendChild(s);}})();

/* ·ä•·â≤ ·äì·ã≠ ·å•·ã´·âÑ·â≥·âµ ·ãù·à≠·ãù·à≠ ‚Äî ·ä®·àù ·ãù·äê·â†·à® ·â•·âµ·åç·à≠·äõ */
const quizData = [
            // Matching Names to Stories (10 questions)
            {
                type: 'matching',
                typeBadge: 'üë• ·àµ·àõ·âµ·äï ·ãõ·äï·â≥·â≥·âµ·äï',
                question: '·ä•·ãû·àù ·àµ·àõ·âµ ·àù·àµ ·ãõ·äï·â≥·â≥·â∂·àù ·ä£·ãõ·àù·ã±',
                pairs: [
                    { left: '·ã≥·ãä·âµ', right: '·åé·àç·ã´·ãµ ·ãù·âê·â∞·àà' },
                    { left: '·äñ·àÖ', right: '·àò·à≠·ä®·â• ·ãù·à∞·à≠·àê' },
                    { left: '·ãÆ·äì·àµ', right: '·ä£·â• ·ä®·â•·ã≤ ·ãì·à≥ ·ãù·ä£·â∞·ãà' },
                    { left: '·àô·à¥', right: '·âÄ·ã≠·àï ·â£·àï·à™ ·ãù·àò·âê·àà' }
                ]
            },
            {
                type: 'multiple',
                typeBadge: 'üìñ ·ä´·â• ·ãõ·äï·â≥ ·àù·àù·à´·åΩ',
                question: '·àò·äï ·ä•·ã© ·ä•·â≤ ·àÖ·ãù·â¢ ·ä•·àµ·à´·ä§·àç ·ä´·â• ·åç·â•·å∫ ·ãò·ãç·åΩ·ä§?',
                options: ['·àô·à¥', '·ä£·â•·à´·àÉ·àù', '·ã≥·ãä·âµ', '·à∞·àé·àû·äï'],
                correct: 0,
                hint: '·ä£·â• ·âÄ·ã≠·àï ·â£·àï·à™ ·â∞·ä£·àù·à≠ ·ãù·åà·â†·à®'
            },
            {
                type: 'fill',
                typeBadge: '‚úçÔ∏è ·àò·ãù·àô·à≠ ·àù·àù·àã·ä•',
                question: '·àò·ãù·àô·à≠ 23:1 ·àù·àù·àã·ä•',
                text: '·ä•·åç·ãö·ä£·â•·àÑ·à≠ _____ ·ä•·ã©·ç£ ·ä£·ã≠·ä≠·åé·ãµ·àç·äï ·ä•·ã®·ç¢',
                answer: '·åì·à≥·ã≠',
                hint: '·ä£·â£·åä·ãï ·ãù·àï·àâ'
            },
            {
                type: 'multiple',
                typeBadge: 'üìñ ·ä´·â• ·ãõ·äï·â≥ ·àù·àù·à´·åΩ',
                question: '·ä£·â• ·ãï·ã≥·åã ·â£·â¢·àé·äï ·àò·äï ·ä•·ãÆ·àù ·ä•·â∂·àù ·à∞·àà·àµ·â∞ ·àò·äï·ä•·à∞·ã´·âµ?',
                options: ['·àª·ãµ·à´·ä≠·ç£ ·àú·àª·ä≠·ç£ ·ä£·â§·ãµ·äê·åé', '·å¥·å•·àÆ·àµ·ç£ ·ã´·âÜ·â•·ç£ ·ãÆ·àÉ·äï·àµ', '·ä£·â•·à´·àÉ·àù·ç£ ·ã≠·àµ·àÉ·âÖ·ç£ ·ã´·âÜ·â•', '·ã≥·ãä·âµ·ç£ ·à∞·àé·àû·äï·ç£ ·ä£·à≥'],
                correct: 0,
                hint: '·ä£·â• ·àì·ãä ·ãò·ã≠·äê·ã∞·ã±'
            },
            {
                type: 'matching',
                typeBadge: 'üë• ·àì·ãã·à≠·ã´·âµ',
                question: '·àì·ãã·à≠·ã´·âµ ·àù·àµ ·àù·äï·â£·à≠ ·ä£·ãõ·àù·ã±',
                pairs: [
                    { left: '·å¥·å•·àÆ·àµ', right: '·ä£·â• ·àõ·ãï·à™ ·àï·àõ·âï ·àì·à∞·äª' },
                    { left: '·â∂·àõ·àµ', right: '·çà·àä·àµ·âµ ·ãù·åà·àç·å∏' },
                    { left: '·å¥·ãç·àé·àµ', right: '·ä£·â• ·à±·à® ·àò·äï·åç·àµ·â≤ ·â∞·âÄ·ã≠·à®' },
                    { left: '·ãÆ·àì·äï·àµ', right: '·àì·ãã·à≠·ã´ ·ã®·ãç·ã≥·ä•' }
                ]
            },
            /* ... (·ä•·ãö ·ãù·â∞·à®·äΩ·â† ·ãù·à≠·ãù·à≠ ·â•·âµ·åç·à≠·äõ ·àô·àâ ·ä®·àù ·çã·ã≠·àç·ä´ ·ã≠·âï·à¨·â≥ ·ã≠·àï·à≠·àµ·ç¢ ·ä®·àù ·â∞·âê·àö·å° 40 ·å•·ã´·âÑ ·ä£·àé) ... */
];

/* ·âÅ·å•·à≠ ·ã∞·à®·åÉ/·å•·ã´·âÑ */
const QUESTIONS_PER_LEVEL = 10, LEVELS = 4;

/* ·àÅ·äê·â≥ ·àò·åç·â£·à≠ */
let level=1, orderPerLevel=[], indexInLevel=0, scoreThisLevel=0, totalScore=0;
let currentQuestion=null, countdown=null, timeLeft=0;

const el=id=>document.getElementById(id);
const screen={ ribbon:el('ribbon'), levelNum:el('levelNum'), qIndex:el('qIndex'),
  score:el('score'), timer:el('timer'), progress:el('progress'),
  question:el('questionText'), content:el('content'),
  btnPrev:el('btnPrev'), btnNext:el('btnNext'), btnStart:el('btnStart') };
const modal={ root:el('modal'), ribbon:el('modalRibbon'), score:el('modalScore'),
  msg:el('modalMsg'), btnRetry:el('btnRetry'), btnNext:el('btnNextLevel') };

/* ·àï·å°·å° ·àì·åà·ãù */
function shuffle(a){const x=[...a]; for(let i=x.length-1;i>0;i--){const j=(Math.random()*(i+1))|0; [x[i],x[j]]=[x[j],x[i]];} return x;}
function formatTime(s){s=Math.max(0,s|0); return `${String((s/60)|0).padStart(2,'0')}:${String(s%60).padStart(2,'0')}`;}
function calcTimeLimit(q){let text=q.question||''; if(q.text) text+=' '+q.text; if(q.options) text+=' '+q.options.join(' ');
  if(q.pairs) text+=' '+q.pairs.map(p=>p.left+' '+p.right).join(' '); const L=text.length;
  const min=33,max=120; return Math.round(min+Math.min(1,L/220)*(max-min));}

/* ·åÄ·àù·à≠ ·ã∞·à®·åÉ·â≥·âµ ·â•·à´·äï·ã∂·àù */
function resetAll(){
  level=1; orderPerLevel=[];
  for(let L=0;L<LEVELS;L++){const start=L*QUESTIONS_PER_LEVEL;
    const slice=[...Array(QUESTIONS_PER_LEVEL)].map((_,i)=>start+i);
    orderPerLevel.push(shuffle(slice));
  }
  indexInLevel=0; totalScore=0; scoreThisLevel=0; updateHud(); showStart();
}
resetAll();

function showStart(){
  screen.question.textContent='·åÄ·àù·à≠ ·äï·àù·â•·à´·à≠·ç¢';
  screen.content.innerHTML=''; screen.btnStart.style.display='inline-block';
  screen.btnPrev.style.display='none'; screen.btnNext.style.display='none';
  screen.ribbon.textContent=`·ã∞·à®·åÉ ${level}`;
}
function startLevel(){ indexInLevel=0; scoreThisLevel=0;
  screen.btnStart.style.display='none'; screen.btnPrev.style.display='inline-block'; screen.btnNext.style.display='inline-block';
  loadQuestion();
}
function updateHud(){
  screen.levelNum.textContent=level;
  screen.qIndex.textContent=Math.min(indexInLevel+1,QUESTIONS_PER_LEVEL);
  screen.score.textContent=`${scoreThisLevel}/${QUESTIONS_PER_LEVEL}`;
  screen.progress.style.width=((indexInLevel)/QUESTIONS_PER_LEVEL*100)+'%';
}
function loadQuestion(){
  const qIndex=orderPerLevel[level-1][indexInLevel];
  currentQuestion=JSON.parse(JSON.stringify(quizData[qIndex]||{}));
  screen.question.textContent=currentQuestion.question||'';
  screen.content.innerHTML=''; updateHud();
  if(currentQuestion.type==='multiple') renderMultiple(currentQuestion);
  else if(currentQuestion.type==='fill') renderFill(currentQuestion);
  else renderMatching(currentQuestion);
  startTimer(calcTimeLimit(currentQuestion));
}
function startTimer(sec){clearInterval(countdown); timeLeft=sec;
  screen.timer.textContent=formatTime(timeLeft);
  countdown=setInterval(()=>{ timeLeft--; screen.timer.textContent=formatTime(timeLeft);
    if(timeLeft<=0){ clearInterval(countdown); lockQuestion(false); } },1000);
}

/* ·àù·àù·à´·åΩ */
function renderMultiple(q){
  const box=document.createElement('div'); box.className='options'; q._selected=null;
  (q.options||[]).forEach((opt,i)=>{const d=document.createElement('div'); d.className='option'; d.textContent=opt;
    d.onclick=()=>{ if(q._locked) return; [...box.children].forEach(c=>c.classList.remove('selected')); d.classList.add('selected'); q._selected=i; };
    box.appendChild(d);}); screen.content.appendChild(box);
}
/* ·âÅ·à©·â• ·àù·àù·àã·ä• */
function renderFill(q){
  const p=document.createElement('p'); p.style.textAlign='center';
  const parts=(q.text||'').split('_____'); p.innerHTML=`${parts[0]||''} <input class="blank" id="blank" placeholder="·àò·àç·à≤" autocomplete="off" /> ${parts[1]||''}`;
  screen.content.appendChild(p);
}
/* ·àò·ãõ·åç·â• Matching ·â•·â∞·ãì·àõ·àõ·ã≠ ·äê·å•·â¢ ·àò·àµ·àò·à≠ */
function renderMatching(q){
  const wrap=document.createElement('div'); wrap.className='match-wrap';
  const svg=document.createElementNS('http://www.w3.org/2000/svg','svg'); svg.classList.add('connector'); wrap.appendChild(svg);
  const grid=document.createElement('div'); grid.className='match';
  const left=document.createElement('div'); left.className='col';
  const right=document.createElement('div'); right.className='col';
  grid.appendChild(left); grid.appendChild(right); wrap.appendChild(grid); screen.content.appendChild(wrap);

  const shuffledRight=shuffle((q.pairs||[]).map((p,idx)=>({text:p.right, idx})));
  q._links={}; q._locked=false; q._selectedLeft=null;
  const rightByText=Object.fromEntries((q.pairs||[]).map((p,i)=>[p.right,i]));
  (q.pairs||[]).forEach((pair,li)=>{const chip=document.createElement('div'); chip.className='chip'; chip.textContent=pair.left; chip.dataset.left=li;
    chip.onclick=()=>{ if(q._locked||chip.classList.contains('locked'))return; [...left.children].forEach(c=>c.classList.remove('selected')); chip.classList.add('selected'); q._selectedLeft=li; };
    left.appendChild(chip);});
  shuffledRight.forEach((r)=>{const chip=document.createElement('div'); chip.className='chip'; chip.textContent=r.text; chip.dataset.right=r.idx;
    chip.onclick=()=>{ if(q._locked||chip.classList.contains('locked')||q._selectedLeft==null) return;
      const L=q._selectedLeft, Rorig=+chip.dataset.right; q._links[L]=Rorig;
      chip.classList.add('locked'); left.children[L].classList.add('locked'); left.children[L].classList.remove('selected'); drawConnector(svg,left.children[L],chip);
      if(Object.keys(q._links).length===(q.pairs||[]).length){
        const ok=Object.entries(q._links).every(([L,R])=> rightByText[q.pairs[L].right]===+R ); lockQuestion(ok);
      }else q._selectedLeft=null; };
    right.appendChild(chip);});
  function drawConnector(svg,a,b){
    const s=wrap.getBoundingClientRect(), ra=a.getBoundingClientRect(), rb=b.getBoundingClientRect();
    const x1=ra.right-s.left, y1=ra.top+ra.height/2-s.top, x2=rb.left-s.left, y2=rb.top+rb.height/2-s.top;
    svg.setAttribute('viewBox',`0 0 ${wrap.clientWidth} ${wrap.clientHeight}`); svg.setAttribute('width',wrap.clientWidth); svg.setAttribute('height',wrap.clientHeight);
    const line=document.createElementNS('http://www.w3.org/2000/svg','line'); line.setAttribute('x1',x1); line.setAttribute('y1',y1); line.setAttribute('x2',x2); line.setAttribute('y2',y2); svg.appendChild(line);
  }
  new ResizeObserver(()=>{const saved=Object.entries(q._links); svg.innerHTML=''; saved.forEach(([L,R])=>{
    const lc=left.children[+L]; const rc=[...right.children].find(c=>+c.dataset.right===+R); if(lc&&rc) { const tmp=document.createElementNS('http://www.w3.org/2000/svg','line'); }});
    Object.entries(q._links).forEach(([L,R])=>{const lc=left.children[+L]; const rc=[...right.children].find(c=>+c.dataset.right===+R); if(lc&&rc){ const s=wrap.getBoundingClientRect(), ra=lc.getBoundingClientRect(), rb=rc.getBoundingClientRect();
      const x1=ra.right-s.left, y1=ra.top+ra.height/2-s.top, x2=rb.left-s.left, y2=rb.top+rb.height/2-s.top;
      const line=document.createElementNS('http://www.w3.org/2000/svg','line'); line.setAttribute('x1',x1); line.setAttribute('y1',y1); line.setAttribute('x2',x2); line.setAttribute('y2',y2); svg.appendChild(line); });
  }).observe(wrap);
}
/* ·àò·ãà·çà·à≠/·àò·çç·à®·àµ ·àò·àç·à≤ */
function lockQuestion(correct){
  if(currentQuestion._locked) return; currentQuestion._locked=true; clearInterval(countdown);
  if(currentQuestion.type==='multiple'){
    const ops=[...screen.content.querySelectorAll('.option')];
    ops.forEach((el,i)=>{ if(i==currentQuestion.correct) el.classList.add('correct');
      if(currentQuestion._selected===i && i!==currentQuestion.correct) el.classList.add('wrong'); el.onclick=null; });
    correct=(currentQuestion._selected===currentQuestion.correct);
  }
  if(currentQuestion.type==='fill'){
    const val=(screen.content.querySelector('#blank')?.value||'').trim().toLowerCase();
    correct=(val===String(currentQuestion.answer).toLowerCase());
    const input=screen.content.querySelector('#blank'); if(input){ input.disabled=true; input.style.borderBottomColor=correct?'#00e3a2':'#ff4d6d';}
  }
  if(correct){ scoreThisLevel++; totalScore++; }
  screen.score.textContent=`${scoreThisLevel}/${QUESTIONS_PER_LEVEL}`;
}
/* ·àò·äï·âÄ·à≥·âÄ·à≤ ·äì·â• ·âÄ·å∫·àâ/·âÄ·ã≥·àö */
screen.btnStart.onclick=startL
